"use strict";document.addEventListener("DOMContentLoaded",function(){pull("btn_one","menu_one"),pull("btn_two","menu_two"),pull("btn","box"),pull3("icart_left","Jcart_noItem"),option("subnav");var l=document.querySelector("#username"),r=document.querySelector("#usninf"),a=document.querySelector("#email"),e=document.querySelector("#eminf"),c=document.querySelector("#password"),n=document.querySelector("#pawinf"),t=document.querySelector("#confirm_pwd"),o=document.querySelector("#confirm"),u=document.querySelector("#sub");function i(){if(r.innerHTML=/^[A-z][A-z0-9]{4,9}$/.test(l.value)){var e=l.value.trim(),n=new XMLHttpRequest,t="../api/checkname.php?username="+e+"&time="+new Date;n.open("GET",t,!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText;r.style.color="0"==e?(r.innerHTML="账号已使用","red"):(r.innerHTML="格式正确","green")}}}else r.innerHTML="格式不对",r.style.color="red"}function s(){(e.innerHTML=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a.value))?(e.innerHTML="格式正确",e.style.color="green"):(e.innerHTML="格式不对",e.style.color="red")}function d(){(n.innerHTML=/^.[^\s]{5,9}$/.test(c.value))?(n.innerHTML="格式正确",n.style.color="green"):(n.innerHTML="格式不对",n.style.color="red")}function m(){t.value==c.value?(o.innerHTML="密码正确",o.style.color="green"):(o.innerHTML="密码不一致",o.style.color="red")}l.onkeyup=i,a.onkeyup=s,c.onkeyup=d,t.onkeyup=m,u.onclick=function(){i(),s(),d(),m();var e=Array.from(document.querySelectorAll("#div1 span")).every(function(e){return"green"==e.style.color}),n=l.value.trim(),t=c.value.trim(),r=a.value.trim();if(e){var o=new XMLHttpRequest;o.open("POST","../api/reg.php",!0),o.setRequestHeader("content-type","application/x-www-form-urlencoded");var u="name="+n+"&psw="+t+"&email="+r+"&time="+new Date;o.send(u),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&("yes"==o.responseText?(alert("注册成功"),l.value="",c.value="",a.value="",location.href="login.html"):(alert("注册失败"),l.value="",c.value="",a.value=""))}}else alert("注册失败"),l.value="",c.value="",a.value=""}});